2025-11-02 01:48:08.381 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/register - application/json 119
2025-11-02 01:48:08.413 +03:00 [INF] CORS policy execution successful.
2025-11-02 01:48:08.417 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 01:48:08.422 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.Shared.DTOs.UserDto]]] Register(DM.Shared.DTOs.RegistrationDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 01:48:08.505 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Email" = @__email_0)
2025-11-02 01:48:08.516 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "BirthDate", "CreatedAt", "Email", "EmailNotifications", "FullName", "LastLoginAt", "PasswordHash", "PhoneNumber", "Photo", "PreferredLanguage", "Role", "SmsNotifications", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "IsActive";
2025-11-02 01:48:08.530 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DM.Infrastructure.Data.DeliveryContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "BirthDate" of relation "Users" does not exist

POSITION: 28
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "BirthDate" of relation "Users" does not exist
    Position: 28
    File: parse_target.c
    Line: 1057
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "BirthDate" of relation "Users" does not exist

POSITION: 28
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "BirthDate" of relation "Users" does not exist
    Position: 28
    File: parse_target.c
    Line: 1057
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-02 01:48:08.568 +03:00 [ERR] Error registering user: abc@gmail.com
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "BirthDate" of relation "Users" does not exist

POSITION: 28
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "BirthDate" of relation "Users" does not exist
    Position: 28
    File: parse_target.c
    Line: 1057
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DM.Infrastructure.Data.DeliveryContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\HW-Projects\x\sln\DM.Infrastructure\Data\DeliveryContext.cs:line 63
   at DM.Infrastructure.Repositories.BaseRepository`1.AddAsync(T entity) in D:\HW-Projects\x\sln\DM.Infrastructure\Repositories\BaseRepository.cs:line 53
   at DM.Core.Services.UserService.RegisterUserAsync(RegistrationDto registrationDto) in D:\HW-Projects\x\sln\DM.Core\Services\UserService.cs:line 72
   at DM.API.Controllers.AuthController.Register(RegistrationDto registrationDto) in D:\HW-Projects\x\sln\DM.API\Controllers\AuthController.cs:line 33
2025-11-02 01:48:08.601 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[DM.Shared.DTOs.UserDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-02 01:48:08.603 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Register (DM.API) in 175.6861ms
2025-11-02 01:48:08.604 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 01:48:08.605 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/register - 400 null application/json; charset=utf-8 226.2201ms
2025-11-02 01:56:58.334 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/register - application/json 119
2025-11-02 01:56:58.338 +03:00 [INF] CORS policy execution successful.
2025-11-02 01:56:58.341 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 01:56:58.362 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.Shared.DTOs.UserDto]]] Register(DM.Shared.DTOs.RegistrationDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 01:56:58.422 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Email" = @__email_0)
2025-11-02 01:56:58.430 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "BirthDate", "CreatedAt", "Email", "EmailNotifications", "FullName", "LastLoginAt", "PasswordHash", "PhoneNumber", "Photo", "PreferredLanguage", "Role", "SmsNotifications", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "IsActive";
2025-11-02 01:56:58.466 +03:00 [INF] User registered successfully: abc@gmail.com
2025-11-02 01:56:58.467 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[DM.Shared.DTOs.UserDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-02 01:56:58.472 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Register (DM.API) in 103.4994ms
2025-11-02 01:56:58.476 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 01:56:58.479 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/register - 200 null application/json; charset=utf-8 145.2103ms
2025-11-02 02:01:04.066 +03:00 [INF] Application is shutting down...
2025-11-02 02:30:04.554 +03:00 [INF] Executed DbCommand (202ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-11-02 02:30:04.786 +03:00 [INF] Starting DM web application
2025-11-02 02:30:04.844 +03:00 [INF] User profile is available. Using 'C:\Users\Bcc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-02 02:30:05.104 +03:00 [INF] Now listening on: http://localhost:7000
2025-11-02 02:30:05.115 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-02 02:30:05.145 +03:00 [INF] Hosting environment: Production
2025-11-02 02:30:05.172 +03:00 [INF] Content root path: D:\Delivery Publish
2025-11-02 02:31:29.420 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/register - application/json 119
2025-11-02 02:31:29.462 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-02 02:31:29.465 +03:00 [INF] CORS policy execution successful.
2025-11-02 02:31:30.058 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 02:31:30.084 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.Shared.DTOs.UserDto]]] Register(DM.Shared.DTOs.RegistrationDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 02:31:30.564 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Email" = @__email_0)
2025-11-02 02:31:30.817 +03:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "BirthDate", "CreatedAt", "Email", "EmailNotifications", "FullName", "LastLoginAt", "PasswordHash", "PhoneNumber", "Photo", "PreferredLanguage", "Role", "SmsNotifications", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "IsActive";
2025-11-02 02:31:30.850 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'DM.Infrastructure.Data.DeliveryContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "BirthDate" of relation "Users" does not exist

POSITION: 28
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "BirthDate" of relation "Users" does not exist
    Position: 28
    File: parse_target.c
    Line: 1057
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "BirthDate" of relation "Users" does not exist

POSITION: 28
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "BirthDate" of relation "Users" does not exist
    Position: 28
    File: parse_target.c
    Line: 1057
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-02 02:31:30.919 +03:00 [ERR] Error registering user: abc@gmail.com
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "BirthDate" of relation "Users" does not exist

POSITION: 28
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "BirthDate" of relation "Users" does not exist
    Position: 28
    File: parse_target.c
    Line: 1057
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DM.Infrastructure.Data.DeliveryContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\HW-Projects\x\sln\DM.Infrastructure\Data\DeliveryContext.cs:line 63
   at DM.Infrastructure.Repositories.BaseRepository`1.AddAsync(T entity) in D:\HW-Projects\x\sln\DM.Infrastructure\Repositories\BaseRepository.cs:line 53
   at DM.Core.Services.UserService.RegisterUserAsync(RegistrationDto registrationDto) in D:\HW-Projects\x\sln\DM.Core\Services\UserService.cs:line 72
   at DM.API.Controllers.AuthController.Register(RegistrationDto registrationDto) in D:\HW-Projects\x\sln\DM.API\Controllers\AuthController.cs:line 33
2025-11-02 02:31:31.018 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[DM.Shared.DTOs.UserDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-02 02:31:31.057 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Register (DM.API) in 955.2762ms
2025-11-02 02:31:31.062 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 02:31:31.068 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/register - 400 null application/json; charset=utf-8 1649.1409ms
2025-11-02 02:32:38.310 +03:00 [INF] Application is shutting down...
2025-11-02 02:33:35.475 +03:00 [INF] Executed DbCommand (527ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "DeliveryMarketplaceDb";
2025-11-02 02:33:35.850 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" uuid NOT NULL,
    "FullName" character varying(200) NOT NULL,
    "Email" character varying(255) NOT NULL,
    "PasswordHash" character varying(500) NOT NULL,
    "PhoneNumber" character varying(20),
    "Role" text NOT NULL,
    "IsActive" boolean NOT NULL DEFAULT TRUE,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "LastLoginAt" timestamp with time zone,
    "PreferredLanguage" character varying(5) DEFAULT 'en',
    "EmailNotifications" boolean NOT NULL,
    "SmsNotifications" boolean NOT NULL,
    "BirthDate" date,
    "Photo" character varying(500),
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-11-02 02:33:35.873 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Drivers" (
    "Id" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "LicenseNumber" character varying(50) NOT NULL,
    "VehicleType" character varying(50) NOT NULL,
    "VehiclePlateNumber" character varying(20) NOT NULL,
    "VehicleModel" character varying(100),
    "VehicleColor" character varying(50),
    "IsAvailable" boolean NOT NULL,
    "IsVerified" boolean NOT NULL,
    "Rating" numeric(3,2) NOT NULL,
    "TotalRatings" integer NOT NULL,
    "LastLocationUpdate" timestamp with time zone,
    "CurrentLatitude" numeric(10,7),
    "CurrentLongitude" numeric(10,7),
    "CreatedAt" timestamp with time zone NOT NULL DEFAULT (NOW()),
    "UpdatedAt" timestamp with time zone NOT NULL DEFAULT (NOW()),
    CONSTRAINT "PK_Drivers" PRIMARY KEY ("Id"),
    CONSTRAINT "AK_Drivers_UserId" UNIQUE ("UserId"),
    CONSTRAINT "FK_Drivers_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:35.892 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Suppliers" (
    "Id" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "BusinessName" character varying(300) NOT NULL,
    "ContactEmail" character varying(255) NOT NULL,
    "ContactPhone" character varying(20) NOT NULL,
    "BusinessDescription" text,
    "Logo" text,
    "BusinessLicense" character varying(100),
    "IsVerified" boolean NOT NULL DEFAULT FALSE,
    "Rating" numeric NOT NULL,
    "TotalRatings" integer NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Suppliers" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Suppliers_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:35.916 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Addresses" (
    "Id" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "SupplierId" uuid,
    "Label" character varying(100) NOT NULL,
    "FullAddress" character varying(500) NOT NULL,
    "City" character varying(100) NOT NULL,
    "State" character varying(100) NOT NULL,
    "PostalCode" character varying(20) NOT NULL,
    "Country" character varying(100) NOT NULL,
    "Latitude" numeric(10,8),
    "Longitude" numeric(11,8),
    "IsDefault" boolean NOT NULL DEFAULT FALSE,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Addresses" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Addresses_Suppliers_SupplierId" FOREIGN KEY ("SupplierId") REFERENCES "Suppliers" ("Id"),
    CONSTRAINT "FK_Addresses_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:35.940 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Items" (
    "Id" uuid NOT NULL,
    "SupplierId" uuid NOT NULL,
    "Name" character varying(200) NOT NULL,
    "Description" character varying(1000),
    "Price" numeric(10,2) NOT NULL,
    "Currency" character varying(3) NOT NULL DEFAULT 'USD',
    "ImageUrl" character varying(500),
    "Category" character varying(100) NOT NULL,
    "Unit" character varying(50) NOT NULL,
    "StockQuantity" integer NOT NULL DEFAULT 0,
    "MinOrderQuantity" integer NOT NULL DEFAULT 1,
    "IsActive" boolean NOT NULL DEFAULT TRUE,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Items" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Items_Suppliers_SupplierId" FOREIGN KEY ("SupplierId") REFERENCES "Suppliers" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:35.958 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    "Id" uuid NOT NULL,
    "OrderNumber" character varying(50) NOT NULL,
    "UserId" uuid NOT NULL,
    "DeliveryScheduleId" uuid NOT NULL,
    "SupplierId" uuid NOT NULL,
    "DeliveryAddressId" uuid NOT NULL,
    "Status" text NOT NULL,
    "DeliveryType" text NOT NULL,
    "SubTotal" numeric(10,2) NOT NULL,
    "DeliveryFee" numeric(8,2) NOT NULL DEFAULT 0.0,
    "TotalAmount" numeric(10,2) NOT NULL,
    "Notes" character varying(1000),
    "OrderDate" timestamp with time zone NOT NULL,
    "RequestedDeliveryDate" timestamp with time zone,
    "ActualDeliveryDate" timestamp with time zone,
    "Currency" character varying(3) NOT NULL DEFAULT 'USD',
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "AddressId" uuid,
    CONSTRAINT "PK_Orders" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Orders_Addresses_AddressId" FOREIGN KEY ("AddressId") REFERENCES "Addresses" ("Id"),
    CONSTRAINT "FK_Orders_Addresses_DeliveryAddressId" FOREIGN KEY ("DeliveryAddressId") REFERENCES "Addresses" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_Orders_Suppliers_SupplierId" FOREIGN KEY ("SupplierId") REFERENCES "Suppliers" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Orders_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE RESTRICT
);
2025-11-02 02:33:35.983 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Deliveries" (
    "Id" uuid NOT NULL,
    "OrderId" uuid NOT NULL,
    "DriverId" uuid NOT NULL,
    "AssignedAt" timestamp with time zone NOT NULL,
    "PickedUpAt" timestamp with time zone,
    "DeliveredAt" timestamp with time zone,
    "Status" integer NOT NULL,
    "DriverLatitude" numeric,
    "DriverLongitude" numeric,
    "LocationUpdatedAt" timestamp with time zone,
    "DeliveryNotes" text,
    "DeliveryFee" numeric NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Deliveries" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Deliveries_Drivers_DriverId" FOREIGN KEY ("DriverId") REFERENCES "Drivers" ("UserId") ON DELETE RESTRICT,
    CONSTRAINT "FK_Deliveries_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:35.994 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "DeliverySchedules" (
    "Id" uuid NOT NULL,
    "OrderId" uuid NOT NULL,
    "ScheduledDate" timestamp with time zone NOT NULL,
    "StartDate" timestamp with time zone NOT NULL,
    "EndDate" timestamp with time zone NOT NULL,
    "DeliveryType" integer NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_DeliverySchedules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_DeliverySchedules_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:36.021 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OrderItems" (
    "Id" uuid NOT NULL,
    "OrderId" uuid NOT NULL,
    "ItemId" uuid NOT NULL,
    "Quantity" integer NOT NULL,
    "UnitPrice" numeric(10,2) NOT NULL,
    "TotalPrice" numeric(10,2) NOT NULL,
    "Notes" character varying(500),
    CONSTRAINT "PK_OrderItems" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_OrderItems_Items_ItemId" FOREIGN KEY ("ItemId") REFERENCES "Items" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_OrderItems_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" ("Id") ON DELETE CASCADE
);
2025-11-02 02:33:36.027 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Addresses_SupplierId" ON "Addresses" ("SupplierId");
2025-11-02 02:33:36.040 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Addresses_UserId_IsDefault" ON "Addresses" ("UserId", "IsDefault");
2025-11-02 02:33:36.050 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Deliveries_DriverId" ON "Deliveries" ("DriverId");
2025-11-02 02:33:36.060 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Deliveries_OrderId" ON "Deliveries" ("OrderId");
2025-11-02 02:33:36.070 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_DeliverySchedules_OrderId" ON "DeliverySchedules" ("OrderId");
2025-11-02 02:33:36.076 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_DeliverySchedules_ScheduledDate" ON "DeliverySchedules" ("ScheduledDate");
2025-11-02 02:33:36.088 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Driver_LicenseNumber" ON "Drivers" ("LicenseNumber");
2025-11-02 02:33:36.095 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Driver_UserId" ON "Drivers" ("UserId");
2025-11-02 02:33:36.104 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Items_Category" ON "Items" ("Category");
2025-11-02 02:33:36.112 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Items_Name" ON "Items" ("Name");
2025-11-02 02:33:36.121 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Items_SupplierId_IsActive" ON "Items" ("SupplierId", "IsActive");
2025-11-02 02:33:36.129 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_ItemId" ON "OrderItems" ("ItemId");
2025-11-02 02:33:36.138 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_OrderId_ItemId" ON "OrderItems" ("OrderId", "ItemId");
2025-11-02 02:33:36.144 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_AddressId" ON "Orders" ("AddressId");
2025-11-02 02:33:36.152 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_CreatedAt" ON "Orders" ("CreatedAt");
2025-11-02 02:33:36.160 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_DeliveryAddressId" ON "Orders" ("DeliveryAddressId");
2025-11-02 02:33:36.170 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Orders_OrderNumber" ON "Orders" ("OrderNumber");
2025-11-02 02:33:36.177 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_SupplierId" ON "Orders" ("SupplierId");
2025-11-02 02:33:36.187 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_UserId_Status" ON "Orders" ("UserId", "Status");
2025-11-02 02:33:36.193 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Supplier_UserId" ON "Suppliers" ("UserId");
2025-11-02 02:33:36.204 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Suppliers_ContactEmail" ON "Suppliers" ("ContactEmail");
2025-11-02 02:33:36.210 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_User_Email" ON "Users" ("Email");
2025-11-02 02:33:36.228 +03:00 [INF] Starting DM web application
2025-11-02 02:33:36.254 +03:00 [INF] User profile is available. Using 'C:\Users\Bcc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-02 02:33:36.322 +03:00 [INF] Now listening on: http://localhost:7000
2025-11-02 02:33:36.325 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-02 02:33:36.327 +03:00 [INF] Hosting environment: Production
2025-11-02 02:33:36.329 +03:00 [INF] Content root path: D:\Delivery Publish
2025-11-02 02:35:13.337 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/register - application/json 119
2025-11-02 02:35:13.421 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-02 02:35:13.426 +03:00 [INF] CORS policy execution successful.
2025-11-02 02:35:13.456 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 02:35:13.487 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.Shared.DTOs.UserDto]]] Register(DM.Shared.DTOs.RegistrationDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 02:35:14.141 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Email" = @__email_0)
2025-11-02 02:35:14.516 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "BirthDate", "CreatedAt", "Email", "EmailNotifications", "FullName", "LastLoginAt", "PasswordHash", "PhoneNumber", "Photo", "PreferredLanguage", "Role", "SmsNotifications", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "IsActive";
2025-11-02 02:35:14.563 +03:00 [INF] User registered successfully: abc@gmail.com
2025-11-02 02:35:14.585 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[DM.Shared.DTOs.UserDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-02 02:35:14.651 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Register (DM.API) in 1159.5968ms
2025-11-02 02:35:14.654 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 02:35:14.666 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/register - 200 null application/json; charset=utf-8 1330.4457ms
2025-11-02 03:38:45.794 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/swagger/v1/swagger.json - null null
2025-11-02 03:38:46.430 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 638.6308ms
2025-11-02 03:59:20.469 +03:00 [INF] Application is shutting down...
2025-11-02 03:59:47.443 +03:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-11-02 03:59:47.528 +03:00 [INF] Starting DM web application
2025-11-02 03:59:47.589 +03:00 [INF] User profile is available. Using 'C:\Users\Bcc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-02 03:59:47.705 +03:00 [INF] Now listening on: http://localhost:7000
2025-11-02 03:59:47.708 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-02 03:59:47.709 +03:00 [INF] Hosting environment: Production
2025-11-02 03:59:47.712 +03:00 [INF] Content root path: D:\Delivery Publish
2025-11-02 04:00:45.460 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/swagger - null null
2025-11-02 04:00:45.582 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/swagger - 301 0 null 124.6902ms
2025-11-02 04:00:45.597 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/swagger/index.html - null null
2025-11-02 04:00:45.691 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/swagger/index.html - 200 null text/html;charset=utf-8 94.4014ms
2025-11-02 04:00:46.026 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/swagger/v1/swagger.json - null null
2025-11-02 04:00:46.430 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 404.5957ms
2025-11-02 04:01:07.444 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?searchterm=juice - null null
2025-11-02 04:01:07.456 +03:00 [WRN] Failed to determine the https port for redirect.
2025-11-02 04:01:07.567 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:01:07.600 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:01:08.676 +03:00 [INF] Executed DbCommand (141ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:01:08.734 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:01:08.812 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 1204.4777ms
2025-11-02 04:01:08.814 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:01:08.825 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?searchterm=juice - 200 null application/json; charset=utf-8 1381.3462ms
2025-11-02 04:01:46.608 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=juice - null null
2025-11-02 04:01:46.616 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:01:46.617 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:01:46.753 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:01:46.969 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:01:46.983 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 347.9419ms
2025-11-02 04:01:46.984 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:01:46.987 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=juice - 200 null application/json; charset=utf-8 379.3501ms
2025-11-02 04:05:43.590 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=juice - null null
2025-11-02 04:05:43.606 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:05:43.658 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:05:43.792 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:05:43.801 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:05:43.804 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 131.3792ms
2025-11-02 04:05:43.808 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:05:43.811 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=juice - 200 null application/json; charset=utf-8 220.9096ms
2025-11-02 04:05:54.470 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=juice - null null
2025-11-02 04:05:54.474 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:05:54.481 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:05:54.528 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:05:54.546 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:05:54.551 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 66.2506ms
2025-11-02 04:05:54.555 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:05:54.562 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=juice - 200 null application/json; charset=utf-8 91.9018ms
2025-11-02 04:06:07.371 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string - null null
2025-11-02 04:06:07.373 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:06:07.377 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:06:07.424 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categories_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive"
ORDER BY i."Name"
2025-11-02 04:06:07.434 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:06:07.436 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 54.893ms
2025-11-02 04:06:07.437 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:06:07.439 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string - 200 null application/json; charset=utf-8 68.3244ms
2025-11-02 04:07:02.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=dd - null null
2025-11-02 04:07:02.629 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:07:02.631 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:07:02.644 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:07:02.689 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:07:02.695 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 58.9237ms
2025-11-02 04:07:02.700 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:07:02.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=dd - 200 null application/json; charset=utf-8 78.7915ms
2025-11-02 04:07:08.932 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=jui - null null
2025-11-02 04:07:08.936 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:07:08.937 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:07:08.947 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:07:08.953 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:07:08.997 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 55.3843ms
2025-11-02 04:07:09.066 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:07:09.070 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=jui - 200 null application/json; charset=utf-8 138.3058ms
2025-11-02 04:07:14.496 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=j - null null
2025-11-02 04:07:14.503 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:07:14.506 +03:00 [INF] Route matched with {action = "GetitemsByCategries", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[System.Collections.Generic.IEnumerable`1[DM.Shared.DTOs.ItemDto]]]] GetitemsByCategries(System.String[], System.String) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:07:14.514 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categories_0='?' (DbType = Object), @__ToLower_1_rewritten='?', @__ToLower_1_rewritten_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
WHERE i."Category" = ANY (@__categories_0) AND i."IsActive" AND (lower(i."Name") LIKE @__ToLower_1_rewritten ESCAPE '\' OR lower(i."Description") LIKE @__ToLower_1_rewritten_1 ESCAPE '\')
ORDER BY i."Name"
2025-11-02 04:07:14.520 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-02 04:07:14.525 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API) in 14.7004ms
2025-11-02 04:07:14.529 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetitemsByCategries (DM.API)'
2025-11-02 04:07:14.531 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/CatSearch?categories=Medical&categories=string&searchterm=j - 200 null application/json; charset=utf-8 34.8059ms
2025-11-02 04:15:42.799 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:7000/api/Items/a1b427b4-5748-4af5-9123-a298952ca2bf - null null
2025-11-02 04:15:42.803 +03:00 [INF] Executing endpoint 'DM.API.Controllers.ItemsController.GetItem (DM.API)'
2025-11-02 04:15:42.835 +03:00 [INF] Route matched with {action = "GetItem", controller = "Items"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.Shared.DTOs.ItemDto]]] GetItem(System.Guid) on controller DM.API.Controllers.ItemsController (DM.API).
2025-11-02 04:15:43.023 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__itemId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Category", i."CreatedAt", i."Currency", i."Description", i."ImageUrl", i."IsActive", i."MinOrderQuantity", i."Name", i."Price", i."StockQuantity", i."SupplierId", i."Unit", i."UpdatedAt", s."Id", s."BusinessDescription", s."BusinessLicense", s."BusinessName", s."ContactEmail", s."ContactPhone", s."CreatedAt", s."IsVerified", s."Logo", s."Rating", s."TotalRatings", s."UpdatedAt", s."UserId", u."Id", u."BirthDate", u."CreatedAt", u."Email", u."EmailNotifications", u."FullName", u."IsActive", u."LastLoginAt", u."PasswordHash", u."PhoneNumber", u."Photo", u."PreferredLanguage", u."Role", u."SmsNotifications", u."UpdatedAt"
FROM "Items" AS i
INNER JOIN "Suppliers" AS s ON i."SupplierId" = s."Id"
INNER JOIN "Users" AS u ON s."UserId" = u."Id"
WHERE i."Id" = @__itemId_0
LIMIT 1
2025-11-02 04:15:43.137 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[DM.Shared.DTOs.ItemDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-02 04:15:43.150 +03:00 [INF] Executed action DM.API.Controllers.ItemsController.GetItem (DM.API) in 275.6275ms
2025-11-02 04:15:43.154 +03:00 [INF] Executed endpoint 'DM.API.Controllers.ItemsController.GetItem (DM.API)'
2025-11-02 04:15:43.156 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:7000/api/Items/a1b427b4-5748-4af5-9123-a298952ca2bf - 200 null application/json; charset=utf-8 356.82ms
2025-11-02 04:31:47.052 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:7000/api/Items/7100d532-0734-495d-bb7f-53bcc76b5b98 - application/json 398
2025-11-02 04:31:47.062 +03:00 [INF] CORS policy execution successful.
2025-11-02 04:31:47.077 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Supplier)
2025-11-02 04:31:47.112 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-02 04:31:47.128 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:7000/api/Items/7100d532-0734-495d-bb7f-53bcc76b5b98 - 401 0 null 75.0652ms
2025-11-02 04:33:59.101 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/login - application/json 61
2025-11-02 04:33:59.104 +03:00 [INF] CORS policy execution successful.
2025-11-02 04:33:59.106 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Login (DM.API)'
2025-11-02 04:33:59.118 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.API.Controllers.LoginResponseDto]]] Login(DM.Shared.DTOs.LoginDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 04:33:59.158 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-02 04:33:59.188 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Login (DM.API) in 65.2393ms
2025-11-02 04:33:59.190 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Login (DM.API)'
2025-11-02 04:33:59.192 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/login - 400 null application/problem+json; charset=utf-8 90.7982ms
2025-11-02 04:34:11.810 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/login - application/json 59
2025-11-02 04:34:11.817 +03:00 [INF] CORS policy execution successful.
2025-11-02 04:34:11.818 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Login (DM.API)'
2025-11-02 04:34:11.819 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.API.Controllers.LoginResponseDto]]] Login(DM.Shared.DTOs.LoginDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 04:34:11.826 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-02 04:34:11.827 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Login (DM.API) in 5.8638ms
2025-11-02 04:34:11.829 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Login (DM.API)'
2025-11-02 04:34:11.831 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/login - 400 null application/problem+json; charset=utf-8 20.4274ms
2025-11-02 04:35:52.277 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/register - application/json 110
2025-11-02 04:35:52.282 +03:00 [INF] CORS policy execution successful.
2025-11-02 04:35:52.284 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 04:35:52.294 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.Shared.DTOs.UserDto]]] Register(DM.Shared.DTOs.RegistrationDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 04:35:52.510 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE u."Email" = @__email_0)
2025-11-02 04:35:52.864 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Date), @p2='?' (DbType = DateTime), @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?' (DbType = DateTime), @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "BirthDate", "CreatedAt", "Email", "EmailNotifications", "FullName", "LastLoginAt", "PasswordHash", "PhoneNumber", "Photo", "PreferredLanguage", "Role", "SmsNotifications", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
RETURNING "IsActive";
2025-11-02 04:35:52.917 +03:00 [INF] User registered successfully: sami@gmail.com
2025-11-02 04:35:52.921 +03:00 [INF] Executing OkObjectResult, writing value of type 'DM.Shared.DTOs.Common.ApiResponse`1[[DM.Shared.DTOs.UserDto, DM.Shared, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-02 04:35:52.932 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Register (DM.API) in 634.3389ms
2025-11-02 04:35:52.936 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Register (DM.API)'
2025-11-02 04:35:52.938 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/register - 200 null application/json; charset=utf-8 661.0881ms
2025-11-02 04:37:15.573 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:7000/api/Auth/login - application/json 57
2025-11-02 04:37:15.578 +03:00 [INF] CORS policy execution successful.
2025-11-02 04:37:15.581 +03:00 [INF] Executing endpoint 'DM.API.Controllers.AuthController.Login (DM.API)'
2025-11-02 04:37:15.582 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DM.Shared.DTOs.Common.ApiResponse`1[DM.API.Controllers.LoginResponseDto]]] Login(DM.Shared.DTOs.LoginDto) on controller DM.API.Controllers.AuthController (DM.API).
2025-11-02 04:37:15.592 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-02 04:37:15.594 +03:00 [INF] Executed action DM.API.Controllers.AuthController.Login (DM.API) in 4.6958ms
2025-11-02 04:37:15.597 +03:00 [INF] Executed endpoint 'DM.API.Controllers.AuthController.Login (DM.API)'
2025-11-02 04:37:15.601 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:7000/api/Auth/login - 400 null application/problem+json; charset=utf-8 27.5771ms
